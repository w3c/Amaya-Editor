<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type"
  content="application/xhtml+xml; charset=iso-8859-1" />
  <title>Editing with templates</title>
  <meta name="generator" content="amaya 9.53, see http://www.w3.org/Amaya/" />
  <link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body xml:lang="en" lang="en">

<div class="PageHead">
Amaya<img alt="logo" src="../../resources/icons/22x22/logo.png" class="logo" /> 

<p class="nav"><a href="EditChar.html" accesskey="p"><img alt="previous"
src="../../resources/icons/misc/left.png" /></a> <a href="Manual.html"
accesskey="t"><img alt="top" src="../../resources/icons/misc/up.png" /></a> <a
href="Changing.html" accesskey="n"><img alt="next"
src="../../resources/icons/misc/right.png" /></a></p>
</div>

<div id="page_body" class="PageBody">
<h2 id="Templates">Editing with templates</h2>

<h3 id="What">What is a template?</h3>

<p>Templates are used to produce multiple documents of the same type. A
template is a skeleton representing a given type of document, expressed in the
format of the final documents to be produced (XHTML, for instance). The format
of the final documents is called the target language and must be an XML
language.</p>

<p>In a template, the skeleton document contains some statements, expressed in
the XTiger language (eXtensible Templates for Interactive Guided Editing of
Resources), that specify how this minimal document can evolve and grow, while
keeping in line with the intended type of the final document.</p>

<p>Documents produced from this skeleton following the XTiger statements are
called <em>instances</em> of the template. Some parts of the template may be
frozen, if they have to appear in document instances as they are. Some parts
may be changed when producing an instance document, some others may be added
either freely or under some constraints.</p>

<p>The file containing a template must have a <code>.xtd</code> extension.</p>

<p>A template comes often with a set of accompanying resources (images, style
sheets, scripts). A template is a web resource, that can be stored in the local
file system or shared on a remote web server.</p>

<h3 id="Creating1">Creating a template</h3>

<p>You can create your own templates, using the XTiger language. However, Amaya
provides a specific support for creating or updating templates.</p>

<p>The proposed approach is to:</p>
<ul>
  <li>Create first a skeleton of the document instance (.html file) you want to
    generate.</li>
  <li>Select the Template (Tpl) tab of the <strong>Elements</strong> tool and
    click on the first "<em>Create template from current document</em>" entry
    to generate a template (.xtd file) from that document skeleton.</li>
  <li>You can also create a new empty XTiger library (.xtl file) with the
    "<em>Create a library</em>" entry.</li>
  <li>When a template document or a XTiger library is selected, several entries
    of the Template tool are available: 
    <p></p>
    <ul>
      <li>The "<em>Create a component</em>" entry generates a
        <code>component</code> that will be displayed in the <code>head</code>
        of the template document. 
        <p>If the selection is not empty, the current selected content becomes
        the content of the component. A <code>use</code> element is created at
        the current position of the document to say that the component is
        inserted at that position. The selection must be valid (a set of
        complete elements or a string). The command asks the user for the
        <code>component</code> name. That name must be unique and is used to
        display the document structure of template instances.</p>
        <p class="Note"><strong>Note:</strong> The content of the component
        won't be edited in template instances. The user has to insert
        <code>use</code> and/or <code>bag</code> elements inside the component
        to define editable areas. These editable areas can be inserted before
        or after the creation of the component.</p>
        <p></p>
      </li>
      <li>The "<em>Create a new types union</em>" entry generates a
        <code>union</code> element which defines a new type as a choice between
        several basic types (<code>number</code>, <code>string</code>), or
        several elements from the target language (div, h1, h2, p, ...) and
        <code>component</code> names. The current selection has no effect. The
        command asks the user for the <code>union</code> name. That name must
        be unique. 
        <p></p>
      </li>
      <li>The "<em>Import a library</em>" entry generates a <code>import</code>
        element that inserts library declarations at the position. 
        <p></p>
      </li>
      <li>The "<em>Create a text area</em>" entry generates a <code>use</code>
        element that allows one to insert a string in template instances. The
        command asks the user for a <em>label</em>. That label is free and is
        used to display the document structure of template instances. The
        selection must be string that becomes the <em>initial value</em> of the
        <code>use</code> element. 
        <p></p>
      </li>
      <li>The "<em>Use a component or an element</em>" entry generates a new
        <code>use</code> element. 
        <p>If the selection is empty, an dialog proposes the list of elements
        or components that can be inserted at that position and asks the user
        for the <em>label</em> associated with the <code>use</code> element (as
        the previous entry). A <code>use</code> element is generated with an
        empty content.</p>
        <p>If an element of the target language (div, h1, h2, p, ...) is
        selected, the <code>use</code> element will allow one to insert this
        element type at that position. The selected element becomes the
        <em>initial content</em> of the <code>use</code> element. The command
        only asks the user for a <em>label</em>.</p>
        <p></p>
      </li>
      <li>The "<em>Repeat the current use</em>" entry generates a
        <code>repeat</code> of the current selected <code>use</code> element.
        The command asks the user for a <em>label</em>. That label is free and
        is used to note the repeat element in the document structure of
        template instances. 
        <p></p>
      </li>
      <li>The "<em>Create and repeat a component</em>" entry generates at the
        same times a <code>use</code> element inside a <code>repeat</code>
        element. 
        <p></p>
      </li>
      <li>The "<em>Create a free editing box"</em> entry generates a
        <code>bag</code> element. The command asks the user for a
        <em>label</em>. That label is free and is used to display the document
        structure of template instances. 
        <p>The <code>bag</code> element allows several inserts of any element
        of the target language and components defined in the template
        (<code>types="any"</code>). The user has to edit the <code>types</code>
        attribute with the <em>Attributes</em> panel to modify that default
        value.</p>
      </li>
      <li>The "Create attribute control" entry generates a
        <code>attribute</code> element (not available yet).</li>
    </ul>
  </li>
  <li>The created template or XTiger library can stored anywhere, in your local
    file system or remotely.</li>
</ul>

<h3 id="Visualizin">Visualizing template elements</h3>

<p>When a template is displayed, Amaya shows the XTiger elements under the form
of colored frames that surround XHTML elements.</p>
<ul>
  <li>The <code>head</code> element which includes <code>component</code>,
    <code>union</code>, and <code>import</code> elements is displayed with a
    grey background.</li>
  <li>The <em>name</em> of <code>component</code> and <code>union</code>
    elements is displayed on the top of them.</li>
  <li>A <code>use</code> element is displayed is a box a dashed blue frame.
    When its content is a text, the box has a blue background.</li>
  <li>A <code>bag</code> element is a box with a light green background and a
    dashed green frame.</li>
  <li>A <code>repeat</code> element is a box with a <img alt="Repeat icon"
    src="../../resources/icons/16x16/TEMPLATE_repeat.png" width="16"
    height="16" /> icon on the top left.</li>
  <li>The <code>attribute</code> element is not displayed in the Formatted
  view.</li>
</ul>

<p>XTiger elements can also be seen in the <em>Structure view</em> (open this
view with the <strong>Show structure</strong> entry of the
<strong>Views</strong> menu). In the Structure view, XTiger elements are
displayed in gold, while the XHTML elements are in blue. XTiger elements are
also shown in the Source view, but with no special color.</p>

<p>Another way to understand the nesting of XTiger elements with XHTML elements
is the <strong>selection path</strong> displayed in the status bar of the
window (at the bottom of the window). There, you can see the list of all
elements in the structure of the document from the root element to the current
selection. It is updated every time the selection changes. In this path, XTiger
elements are displayed in gold and XHTML elements in black. For XTiger
elements, it is not the element name (<code>use</code>, <code>bag</code>,
<code>repeat</code>) but the <em>label</em> of these elements, as declared in
the template.</p>

<h3 id="Selecting">Selecting templates</h3>

<p>You can select your own templates, or use the templates available on the
Amaya web site at <a
href="http://www.w3.org/Amaya/Templates/">http://www.w3.org/Amaya/Templates/</a></p>

<p>To ease selection among your favorite templates, there is a
<strong>Templates</strong> section in the preferences dialogue
(<strong>Edit/Preferences</strong>, or <strong>amaya/Preferences</strong> under
Mac OS X). Use it to register the templates that Amaya proposes when you create
a new document. </p>

<p>When registering a local template, you use the file browser (browse button)
to locate and select the files to be added to the list. You can also enter the
URI of remote templates in the input area below the list. Use buttons on the
right side of the list to remove a template or to change the order of templates
in the list.</p>

<p>Registering templates in this list is recommended but not mandatory. When
you create a new document instance, you can also choose a template that is not
in that list.</p>

<h3 id="Creating">Creating an instance document</h3>

<p>To create a new document instance from a template, use entry <strong>New/New
document</strong> in the <strong>File</strong> menu. It displays a <a
href="Document.html">dialogue</a>  where you can select:</p>
<ul>
  <li>The template, either by selecting in the list of registered templates or
    by typing the URI or file name of a template that is not in the list.</li>
  <li>The URI or file name of the document instance you want to create.</li>
  <li>Where to open the new document (Replace current, In new tab, In new
    window).</li>
  <li>The Title of the new document that will be displayed by browsers (a
    default title is generated when the user doesn't specify it).</li>
</ul>

<h3 id="Editing">Editing an instance document</h3>

<p>When a template instance is created or opened, Amaya displays side by side
the <em>Formatted view</em> and the <em>Structure view</em> of the document.</p>

<p>In the <em>Formatted view</em>:</p>

<p>Editing is allowed only inside the <code>repeat</code>, <code>use</code>,
and <code>bag</code> elements, i.e. within the colored dashed boxes. The rest
of the document is the fixed part of the template and can not be modified.</p>
<ul>
  <li>Areas where the user can edit are surrounded with colored frames: 
    <ul>
      <li>A blue frame surrounds an area where the user can insert text
        (<code>use</code> elements).</li>
      <li>A green frame surrounds an area where the user can insert elements or
        strings (<code>bag</code> elements).</li>
    </ul>
  </li>
  <li><strong style="color:#7f7f7f">+</strong> buttons allow the user to
    display a pop-up menu and insert one of new elements proposed in the menu
    at the current position (in <code>repeat</code> or <code>bag</code>
    elements).</li>
  <li>The <code>attribute</code> elements only impact the
    <strong>Attributes</strong> panel.</li>
</ul>

<p>In the <em>Structure view</em>: </p>
<ul>
  <li>Labels of XTiger elements are displayed over a colored background: 
    <ul>
      <li>A grey background for inactive <code>use</code> elements</li>
      <li>A gold background for active <code>use</code> elements</li>
      <li>A light gold background for active <code>repeat</code> elements</li>
      <li>A light green background for active <code>bag</code> elements</li>
    </ul>
  </li>
  <li>With active elements, 
    <ul>
      <li>A click on the label, or the top half of the attached vertical line,
        displays a pop-up menu that allows the user to insert a new proposed
        element before.</li>
      <li>A click on the bottom half of the attached vertical line displays a
        pop-up menu that allows the user to insert a new proposed element
      after.</li>
    </ul>
  </li>
</ul>

<h4 id="Editing1">Editing in a <code>repeat</code> element</h4>

<p>In a <code>repeat</code> box, you can create new instances of the repeated
structure or you can delete one. This is controlled by the template, which may
impose a minimum and/or a maximum number of occurrences of the repeated
structure.</p>

<p>When creating a new occurrence of the repeated structure is allowed, <strong
style="color:#1e90ff"><span style="color:#7f7f7f">+</span></strong> icons are
displayed at locations where you are allowed to create it. When you click on
these icons, you get a pop-up menu that tells you what can be inserted at that
position. In some cases the template offers only one type of occurrence. The
pop-up menu then contains a single entry, to clearly state what will be
created. If you click outside the menu, nothing is created.</p>

<p>Another way to create new occurrences of the repeated structure is to select
an existing occurrence, or to put the caret at the end of an occurrence, and to
press the <kbd>Enter</kbd> key. A new occurrence of the repeated structure is
then created, provided the maximum number of occurrences is not reached yet.
The type of the new occurrence is then the same as the one that was selected
when pressing the <kbd>Enter</kbd> key.</p>

<p>When an existing occurrence is empty or fully selected and the
<kbd>Backspace</kbd> or <kbd>Delete</kbd> key is pressed, the element is
deleted, provided the minimum number of occurrences is not reached yet.</p>

<h4 id="Editing3">Editing in a <code>use</code> element</h4>

<p>Most <code>use</code> elements (blue) allow you just to enter free text or
to freely replace/edit existing text. Other <code>use</code> elements offer a
choice between different types of elements that can be inserted at that
position. In that case, a blue triangle icon is displayed in the top left
corner of the box. By clicking this icon, you can select one of the allowed
types through a pop-up menu. When you have chosen a type, the corresponding
structure is generated and you can freely edit its content.</p>

<h4 id="Editing4">Editing in a <code>bag</code> element</h4>

<p>In a <code>bag</code> box (green), you can insert any number of elements of
the types specified by the template. When you want to insert a XHTML element,
do it the usual way provided this type is allowed by the template. It may
happen that some elements are not allowed by the template. The allowed elements
are listed in the <strong>Insert</strong> and <strong>Append</strong> sub-menus
of the contextual menu. The available <code>component</code> elements are also
listed in the <strong>Insert</strong> and <strong>Append</strong> sub-menus of
the contextual menu.</p>
</div>
</body>
</html>
